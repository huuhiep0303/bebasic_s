{"{\"assumptions\":{},\"sourceRoot\":\"D:\\\\S-Group_BE_Basic\\\\Lesson_4\\\\src\\\\\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"D:\\\\S-Group_BE_Basic\\\\Lesson_4\",\"filename\":\"D:\\\\S-Group_BE_Basic\\\\Lesson_4\\\\src\\\\index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"D:\\\\S-Group_BE_Basic\\\\Lesson_4\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"D:\\\\S-Group_BE_Basic\\\\Lesson_4\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$47\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"D:\\\\S-Group_BE_Basic\\\\Lesson_4\\\\node_modules\\\\@babel\\\\preset-env\\\\lib\\\\index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _fs = _interopRequireDefault(require(\"fs\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\nvar app = (0, _express[\"default\"])();\nvar port = 3000;\napp.use(_express[\"default\"].json());\nvar dataFile = 'data.json';\n\n// app.get('/', \n//     (req, res, next) => {\n//         res.json({ message: 'Hello World!' })\n//         return next()\n//     },\n//     (req, res, next) => {\n//         res.json({ message: 'Hello World 2!' })\n//         return next()\n//     },\n//     (req, res) => {\n//         res.send('Hello')\n//     }\n// )\n\nfunction readDataFile(dataFile) {\n  try {\n    var data = _fs[\"default\"].readFileSync(dataFile, 'utf-8');\n    return JSON.parse(data);\n  } catch (error) {\n    console.error(error);\n    return [];\n  }\n}\nfunction writeDataFile(dataFile, data) {\n  try {\n    _fs[\"default\"].writeFileSync(dataFile, JSON.stringify(data, null, 2));\n    console.log('Write file successfully.');\n  } catch (error) {\n    console.error(error);\n  }\n}\napp.get('/users', function (req, res) {\n  try {\n    var data = readDataFile(dataFile);\n    res.json(data);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\napp.get('/users/:id', function (req, res) {\n  try {\n    var id = req.params.id;\n    var data = readDataFile(dataFile);\n    var user = data.find(function (user) {\n      return user.id === parseInt(id);\n    });\n    if (!user) {\n      return res.status(404).json({\n        error: 'Not found user.'\n      });\n    }\n    res.json(user);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\napp.post('/users', function (req, res) {\n  try {\n    var name = req.body.name;\n    if (!name) {\n      return res.status(400).json({\n        error: 'Please enter name.'\n      });\n    }\n    var data = readDataFile(dataFile);\n    // const existingIDs = data.map((user) => user.id).sort((a,b) => a - b)\n\n    // let newID = 1\n    // for (let i = 0; i < existingIDs.length; i++) {\n    //     if (existingIDs[i] !== newID) {\n    //         break;\n    //     }\n    //     newID++\n    // }\n\n    var existingIds = new Set(data.map(function (user) {\n      return user.id;\n    }));\n    var newID = 1;\n    while (existingIds.has(newID)) {\n      newID++;\n    }\n    var newUser = {\n      id: newID,\n      name: name\n    };\n    data.push(newUser);\n    writeDataFile(dataFile, data);\n    res.status(201).json(newUser);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\napp.put('/users/:id', function (req, res) {\n  try {\n    var id = req.params.id;\n    var name = req.body.name;\n    if (!name) {\n      return res.status(400).json({\n        error: 'Please enter name.'\n      });\n    }\n    var data = readDataFile(dataFile);\n    var user = data.find(function (user) {\n      return user.id === parseInt(id);\n    });\n    if (!user) {\n      return res.status(404).json({\n        error: 'Not found user.'\n      });\n    }\n    user.name = name;\n    writeDataFile(dataFile, data);\n    res.status(200).json(user);\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\napp[\"delete\"]('/users/:id', function (req, res) {\n  try {\n    var id = req.params.id;\n    var data = readDataFile(dataFile);\n    var newUsers = data.filter(function (user) {\n      return user.id !== parseInt(id);\n    });\n    if (newUsers.length === data.length) {\n      return res.status(404).json({\n        error: 'Not found user.'\n      });\n    }\n    writeDataFile(dataFile, newUsers);\n    res.status(200).json({\n      message: 'Deleted successfully.'\n    });\n  } catch (error) {\n    res.status(500).json({\n      message: error.message\n    });\n  }\n});\napp.listen(port, function () {\n  console.log(\"Example app listening on port \".concat(port));\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2ZzIiwiZSIsIl9fZXNNb2R1bGUiLCJhcHAiLCJleHByZXNzIiwicG9ydCIsInVzZSIsImpzb24iLCJkYXRhRmlsZSIsInJlYWREYXRhRmlsZSIsImRhdGEiLCJmcyIsInJlYWRGaWxlU3luYyIsIkpTT04iLCJwYXJzZSIsImVycm9yIiwiY29uc29sZSIsIndyaXRlRGF0YUZpbGUiLCJ3cml0ZUZpbGVTeW5jIiwic3RyaW5naWZ5IiwibG9nIiwiZ2V0IiwicmVxIiwicmVzIiwic3RhdHVzIiwibWVzc2FnZSIsImlkIiwicGFyYW1zIiwidXNlciIsImZpbmQiLCJwYXJzZUludCIsInBvc3QiLCJuYW1lIiwiYm9keSIsImV4aXN0aW5nSWRzIiwiU2V0IiwibWFwIiwibmV3SUQiLCJoYXMiLCJuZXdVc2VyIiwicHVzaCIsInB1dCIsIm5ld1VzZXJzIiwiZmlsdGVyIiwibGVuZ3RoIiwibGlzdGVuIiwiY29uY2F0Il0sInNvdXJjZVJvb3QiOiJEOlxcUy1Hcm91cF9CRV9CYXNpY1xcTGVzc29uXzRcXHNyY1xcIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJ1xyXG5cclxuY29uc3QgYXBwID0gZXhwcmVzcygpIFxyXG5jb25zdCBwb3J0ID0gMzAwMFxyXG5cclxuYXBwLnVzZShleHByZXNzLmpzb24oKSlcclxuaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5jb25zdCBkYXRhRmlsZSA9ICdkYXRhLmpzb24nXHJcblxyXG4vLyBhcHAuZ2V0KCcvJywgXHJcbi8vICAgICAocmVxLCByZXMsIG5leHQpID0+IHtcclxuLy8gICAgICAgICByZXMuanNvbih7IG1lc3NhZ2U6ICdIZWxsbyBXb3JsZCEnIH0pXHJcbi8vICAgICAgICAgcmV0dXJuIG5leHQoKVxyXG4vLyAgICAgfSxcclxuLy8gICAgIChyZXEsIHJlcywgbmV4dCkgPT4ge1xyXG4vLyAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0hlbGxvIFdvcmxkIDIhJyB9KVxyXG4vLyAgICAgICAgIHJldHVybiBuZXh0KClcclxuLy8gICAgIH0sXHJcbi8vICAgICAocmVxLCByZXMpID0+IHtcclxuLy8gICAgICAgICByZXMuc2VuZCgnSGVsbG8nKVxyXG4vLyAgICAgfVxyXG4vLyApXHJcblxyXG5mdW5jdGlvbiByZWFkRGF0YUZpbGUoZGF0YUZpbGUpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhkYXRhRmlsZSwgJ3V0Zi04JylcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCBlcnJvcilcclxuICAgICAgICByZXR1cm4gW11cclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVEYXRhRmlsZShkYXRhRmlsZSwgZGF0YSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGRhdGFGaWxlLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSlcclxuICAgICAgICBjb25zb2xlLmxvZygnV3JpdGUgZmlsZSBzdWNjZXNzZnVsbHkuJylcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcilcclxuICAgIH1cclxufVxyXG5cclxuYXBwLmdldCgnL3VzZXJzJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZWFkRGF0YUZpbGUoZGF0YUZpbGUpXHJcbiAgICAgICAgcmVzLmpzb24oZGF0YSlcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pXHJcbiAgICB9XHJcbn0pXHJcblxyXG5hcHAuZ2V0KCcvdXNlcnMvOmlkJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHtpZH0gPSByZXEucGFyYW1zXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHJlYWREYXRhRmlsZShkYXRhRmlsZSlcclxuICAgICAgICBjb25zdCB1c2VyID0gZGF0YS5maW5kKCh1c2VyKSA9PiB1c2VyLmlkID09PSBwYXJzZUludChpZCkpXHJcbiAgICAgICAgaWYgKCF1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kIHVzZXIuJyB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXMuanNvbih1c2VyKVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UgfSlcclxuICAgIH1cclxufSlcclxuXHJcbmFwcC5wb3N0KCcvdXNlcnMnLCAocmVxLCByZXMpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qge25hbWV9ID0gcmVxLmJvZHlcclxuICAgICAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdQbGVhc2UgZW50ZXIgbmFtZS4nIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZWFkRGF0YUZpbGUoZGF0YUZpbGUpXHJcbiAgICAgICAgLy8gY29uc3QgZXhpc3RpbmdJRHMgPSBkYXRhLm1hcCgodXNlcikgPT4gdXNlci5pZCkuc29ydCgoYSxiKSA9PiBhIC0gYilcclxuICAgICAgICBcclxuICAgICAgICAvLyBsZXQgbmV3SUQgPSAxXHJcbiAgICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCBleGlzdGluZ0lEcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICBpZiAoZXhpc3RpbmdJRHNbaV0gIT09IG5ld0lEKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBuZXdJRCsrXHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBjb25zdCBleGlzdGluZ0lkcyA9IG5ldyBTZXQoZGF0YS5tYXAodXNlciA9PiB1c2VyLmlkKSk7XHJcbiAgICAgICAgbGV0IG5ld0lEID0gMTtcclxuICAgICAgICB3aGlsZSAoZXhpc3RpbmdJZHMuaGFzKG5ld0lEKSkge1xyXG4gICAgICAgICAgICBuZXdJRCsrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbmV3VXNlciA9IHsgaWQ6IG5ld0lELCBuYW1lIH1cclxuICAgICAgICBkYXRhLnB1c2gobmV3VXNlcilcclxuICAgICAgICB3cml0ZURhdGFGaWxlKGRhdGFGaWxlLCBkYXRhKVxyXG4gICAgICAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKG5ld1VzZXIpXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KVxyXG4gICAgfVxyXG59KVxyXG5cclxuYXBwLnB1dCgnL3VzZXJzLzppZCcsIChyZXEsIHJlcyk9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHtpZH0gPSByZXEucGFyYW1zXHJcbiAgICAgICAgY29uc3Qge25hbWV9ID0gcmVxLmJvZHlcclxuICAgICAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdQbGVhc2UgZW50ZXIgbmFtZS4nIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZWFkRGF0YUZpbGUoZGF0YUZpbGUpXHJcbiAgICAgICAgY29uc3QgdXNlciA9IGRhdGEuZmluZCgodXNlcikgPT4gdXNlci5pZCA9PT0gcGFyc2VJbnQoaWQpKVxyXG4gICAgICAgIGlmICghdXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLmpzb24oeyBlcnJvcjogJ05vdCBmb3VuZCB1c2VyLicgfSlcclxuICAgICAgICB9XHJcbiAgICAgICAgdXNlci5uYW1lID0gbmFtZVxyXG4gICAgICAgIHdyaXRlRGF0YUZpbGUoZGF0YUZpbGUsIGRhdGEpXHJcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odXNlcilcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiBlcnJvci5tZXNzYWdlIH0pXHJcbiAgICB9XHJcbn0pXHJcblxyXG5hcHAuZGVsZXRlKCcvdXNlcnMvOmlkJywgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHtpZH0gPSByZXEucGFyYW1zIFxyXG4gICAgICAgIGNvbnN0IGRhdGEgPSByZWFkRGF0YUZpbGUoZGF0YUZpbGUpXHJcbiAgICAgICAgY29uc3QgbmV3VXNlcnMgPSBkYXRhLmZpbHRlcigodXNlcikgPT4gdXNlci5pZCAhPT0gcGFyc2VJbnQoaWQpKVxyXG4gICAgICAgIGlmIChuZXdVc2Vycy5sZW5ndGggPT09IGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwNCkuanNvbih7IGVycm9yOiAnTm90IGZvdW5kIHVzZXIuJyB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICB3cml0ZURhdGFGaWxlKGRhdGFGaWxlLCBuZXdVc2VycylcclxuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdEZWxldGVkIHN1Y2Nlc3NmdWxseS4nIH0pXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogZXJyb3IubWVzc2FnZSB9KVxyXG4gICAgfVxyXG59KVxyXG4gICAgXHJcbmFwcC5saXN0ZW4ocG9ydCwgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGBFeGFtcGxlIGFwcCBsaXN0ZW5pbmcgb24gcG9ydCAke3BvcnR9YClcclxufSkiXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBTUEsSUFBQUMsR0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQW1CLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsZ0JBQUFBLENBQUE7QUFKbkIsSUFBTUUsR0FBRyxHQUFHLElBQUFDLG1CQUFPLEVBQUMsQ0FBQztBQUNyQixJQUFNQyxJQUFJLEdBQUcsSUFBSTtBQUVqQkYsR0FBRyxDQUFDRyxHQUFHLENBQUNGLG1CQUFPLENBQUNHLElBQUksQ0FBQyxDQUFDLENBQUM7QUFFdkIsSUFBTUMsUUFBUSxHQUFHLFdBQVc7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFNBQVNDLFlBQVlBLENBQUNELFFBQVEsRUFBRTtFQUM1QixJQUFJO0lBQ0EsSUFBTUUsSUFBSSxHQUFHQyxjQUFFLENBQUNDLFlBQVksQ0FBQ0osUUFBUSxFQUFFLE9BQU8sQ0FBQztJQUMvQyxPQUFPSyxJQUFJLENBQUNDLEtBQUssQ0FBQ0osSUFBSSxDQUFDO0VBQzNCLENBQUMsQ0FBQyxPQUFPSyxLQUFLLEVBQUU7SUFDWkMsT0FBTyxDQUFDRCxLQUFLLENBQUVBLEtBQUssQ0FBQztJQUNyQixPQUFPLEVBQUU7RUFDYjtBQUNKO0FBRUEsU0FBU0UsYUFBYUEsQ0FBQ1QsUUFBUSxFQUFFRSxJQUFJLEVBQUU7RUFDbkMsSUFBSTtJQUNBQyxjQUFFLENBQUNPLGFBQWEsQ0FBQ1YsUUFBUSxFQUFFSyxJQUFJLENBQUNNLFNBQVMsQ0FBQ1QsSUFBSSxFQUFFLElBQUksRUFBRSxD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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_fs","e","__esModule","app","express","port","use","json","dataFile","readDataFile","data","fs","readFileSync","JSON","parse","error","console","writeDataFile","writeFileSync","stringify","log","get","req","res","status","message","id","params","user","find","parseInt","post","name","body","existingIds","Set","map","newID","has","newUser","push","put","newUsers","filter","length","listen","concat"],"sourceRoot":"D:\\S-Group_BE_Basic\\Lesson_4\\src\\","sources":["index.js"],"sourcesContent":["import express from 'express'\r\n\r\nconst app = express() \r\nconst port = 3000\r\n\r\napp.use(express.json())\r\nimport fs from 'fs'\r\nconst dataFile = 'data.json'\r\n\r\n// app.get('/', \r\n//     (req, res, next) => {\r\n//         res.json({ message: 'Hello World!' })\r\n//         return next()\r\n//     },\r\n//     (req, res, next) => {\r\n//         res.json({ message: 'Hello World 2!' })\r\n//         return next()\r\n//     },\r\n//     (req, res) => {\r\n//         res.send('Hello')\r\n//     }\r\n// )\r\n\r\nfunction readDataFile(dataFile) {\r\n    try {\r\n        const data = fs.readFileSync(dataFile, 'utf-8')\r\n        return JSON.parse(data)\r\n    } catch (error) {\r\n        console.error( error)\r\n        return []\r\n    }\r\n}\r\n\r\nfunction writeDataFile(dataFile, data) {\r\n    try {\r\n        fs.writeFileSync(dataFile, JSON.stringify(data, null, 2))\r\n        console.log('Write file successfully.')\r\n    } catch (error) {\r\n        console.error(error)\r\n    }\r\n}\r\n\r\napp.get('/users', (req, res) => {\r\n    try {\r\n        const data = readDataFile(dataFile)\r\n        res.json(data)\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message })\r\n    }\r\n})\r\n\r\napp.get('/users/:id', (req, res) => {\r\n    try {\r\n        const {id} = req.params\r\n        const data = readDataFile(dataFile)\r\n        const user = data.find((user) => user.id === parseInt(id))\r\n        if (!user) {\r\n            return res.status(404).json({ error: 'Not found user.' })\r\n        }\r\n        res.json(user)\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message })\r\n    }\r\n})\r\n\r\napp.post('/users', (req, res) => {\r\n    try {\r\n        const {name} = req.body\r\n        if (!name) {\r\n            return res.status(400).json({ error: 'Please enter name.' })\r\n        }\r\n        const data = readDataFile(dataFile)\r\n        // const existingIDs = data.map((user) => user.id).sort((a,b) => a - b)\r\n        \r\n        // let newID = 1\r\n        // for (let i = 0; i < existingIDs.length; i++) {\r\n        //     if (existingIDs[i] !== newID) {\r\n        //         break;\r\n        //     }\r\n        //     newID++\r\n        // }\r\n\r\n        const existingIds = new Set(data.map(user => user.id));\r\n        let newID = 1;\r\n        while (existingIds.has(newID)) {\r\n            newID++;\r\n        }\r\n\r\n        const newUser = { id: newID, name }\r\n        data.push(newUser)\r\n        writeDataFile(dataFile, data)\r\n        res.status(201).json(newUser)\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message })\r\n    }\r\n})\r\n\r\napp.put('/users/:id', (req, res)=> {\r\n    try {\r\n        const {id} = req.params\r\n        const {name} = req.body\r\n        if (!name) {\r\n            return res.status(400).json({ error: 'Please enter name.' })\r\n        }\r\n        const data = readDataFile(dataFile)\r\n        const user = data.find((user) => user.id === parseInt(id))\r\n        if (!user) {\r\n            return res.status(404).json({ error: 'Not found user.' })\r\n        }\r\n        user.name = name\r\n        writeDataFile(dataFile, data)\r\n        res.status(200).json(user)\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message })\r\n    }\r\n})\r\n\r\napp.delete('/users/:id', (req, res) => {\r\n    try {\r\n        const {id} = req.params \r\n        const data = readDataFile(dataFile)\r\n        const newUsers = data.filter((user) => user.id !== parseInt(id))\r\n        if (newUsers.length === data.length) {\r\n            return res.status(404).json({ error: 'Not found user.' })\r\n        }\r\n        writeDataFile(dataFile, newUsers)\r\n        res.status(200).json({ message: 'Deleted successfully.' })\r\n    } catch (error) {\r\n        res.status(500).json({ message: error.message })\r\n    }\r\n})\r\n    \r\napp.listen(port, () => {\r\n  console.log(`Example app listening on port ${port}`)\r\n})"],"mappings":"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","ignoreList":[]}},"mtime":1743753729936}}